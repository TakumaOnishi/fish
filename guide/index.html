<!DOCTYPE html>
<html>

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/ fb# website: http://ogp.me/ns/ website#">
   <meta charset="UTF-8">
   <title>おさかなユーザーガイド</title>
   <meta name="description" content="おさかなキーボードを使い始めよう！">
   <meta property="og:url" content="https://o24.works/fish/guide"/>
   <meta property="og:type" content="website"/>
   <meta property="og:title" content="おさかなユーザーガイド"/>
   <meta property="og:site_name" content="おさかなユーザーガイド"/>
   <meta property="og:description" content="おさかなキーボードを使い始めよう！"/>
   <meta property="og:image" content="https://o24.works/fish/guide/ogp.png"/>
   <meta name="twitter:card" content="summary_large_image"/>
   <meta name="viewport" content="width=device-width,initial-scale=1"/>
   <link rel="icon" type="image/png" href="../favicon.ico">
   <link rel="stylesheet" href="../style.css?2">
   <link rel="stylesheet" href="style.css?2">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,250..400,0,0"/>
   <script src="script.js?1"></script>
</head>

<body>
   <header>
      <div id="h_upper">
         <p>おさかなキーボード</p>
         <div id="ham">
            <span></span>
            <span></span>
         </div>
      </div>
      <div id="h_downer">
         <a href="../index.html">セールス</a>
         <a href="https://shop.yushakobo.jp/products/9519" target="_blank">購入<span class="material-symbols-rounded">open_in_new</span></a>
         <div>ユーザーガイド</div>
         <a href="../editor/index.html" target="_blank">キーマップエディター<span class="material-symbols-rounded">open_in_new</span></a>
         <a href="../tester/index.html">テスター</a>
         <a href="https://discord.gg/VaGEcTQ5tC" target="_blank">コミュニティ<span class="material-symbols-rounded">open_in_new</span></a>
      </div>
   </header>
   <div id="outdex">
      <a href="../index.html">セールス</a>
      <a href="https://shop.yushakobo.jp/products/9519" target="_blank">購入<span class="material-symbols-rounded">open_in_new</span></a>
      <div>ユーザーガイド</div>
      <a href="../editor/index.html" target="_blank">キーマップエディター<span class="material-symbols-rounded">open_in_new</span></a>
      <a href="../tester/index.html">テスター</a>
      <a href="https://discord.gg/VaGEcTQ5tC" target="_blank">コミュニティ<span class="material-symbols-rounded">open_in_new</span></a>
   </div>
   <div class="content">
      <h1>ユーザーガイド</h1>
      <p><a href="../index.html">おさかなキーボード</a>をお買い求めいただき、ありがとうございます。<br>
         使い方を説明させてください。</p>

      <div class="warn">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">warning</span>使用上の注意</h3>
         <p class="dot">液体や粉塵をかけたり、高温になる場所に放置したり、強い力や衝撃を与えないでください。接触不良やバッテリーの発火を起こす可能性があります。</p>
         <p class="dot">直射日光に長期間当てないでください。筐体とキーキャップは紫外線で硬化するレジンでできているため、変色・ひび割れを起こす可能性があります。</p>
         <p class="dot">日本国外で電源を入れないでください。組み込みモジュールの転記で技適認証を省略できる国は日本くらいなので、違法電波となる可能性があります。</p>
         <div class="imgbox"><img src="img/giteki.webp"/></div>
      </div>
      <h2 id="start">使い始める</h2>
      <img src="img/power.webp"/>
      <p>二匹を向かい合うように置き、それぞれの下アゴの陰にある灰色の電源スイッチを上に切り替えます。</p>
      <img src="img/pairing.webp"/>
      <p>パソコンからBluetooth機器の管理画面を開き、「Fish Keyboard」が表示されたら接続します。<br>
         入力方式の指定を求められた場合はANSI（US配列）を選択します。</p>
      <img src="img/test.webp">
      <p>適当なキーを押して、入力が通っているか確かめます。<br>
         動作確認がしやすい<a href="../tester/index.html" target="_blank">テスター</a>ページもご活用ください。</p>

      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>デフォルトキーマップ</h3>
         <p>開封時点では以下のようなキーマップが設定されています（購入時期によって若干異なる場合があります）。</p>
         <img src="img/win.webp"/>
         <p class="dot">普通にキーを押すと青字が入ります。英字の並びは<a href="https://o24.works/layout/" target="_blank">大西配列</a>です。</p>
         <p class="dot">AとO、TとNを同時に押すとそれぞれ日本語IMEのオフ、オンが入ります。</p>
         <p class="dot">長押しすると背景の修飾キーが入ります。</p>
         <p class="dot dot2">OやTを長押しするとShiftが、AやNを長押しするとAlt/Optionが、IやSを長押しするとWindows/Command/Metaが、EnterやTabを長押しするとControlが入ります。</p>
         <p class="dot dot2">BackSpaceを長押しするとレイヤー１（黄色字）が、Spaceを長押しするとレイヤー２（赤字）が、その両方の長押し中はレイヤー３（灰色字）が有効化します。</p>
         <p class="dot dot2">これらの複合キーは、短く押した直後に長押しすれば短打側の長押しが入ります。</p>
         <p class="dot">レイヤー３（灰色字）にはいくつか特殊なキーがあります。</p>
         <p class="dot dot2">BT Sel 0~4は、その番号に登録された（なければ新規）機器とBluetooth接続を試みます。</p>
         <p class="dot dot2">BT Clearは現在接続中の、BT Clear Allはすべての機器とのペアリング情報を削除します。</p>
         <p class="dot dot2">USB↔︎BTは、親機充電中に出力先をUSBからBluetoothに切り替え、再度押すと戻します。これはACアダプターなど、接続したい機器以外から給電している場合に便利です。</p>
         <p class="dot dot2">Win↔︎Macは、macOS向けのキーマップを有効化します。具体的には以下のように、Command/Windows/MetaとControlの位置を入れ替え、<span class="material-symbols-rounded" style="font-size: 1.2rem;">photo_camera</span>の中身をPrintScreenから⇧⌘3に変えます。再度押すか電源が切れるとWindows用のキーマップに戻ります。</p>
         <img src="img/mac.webp"/>
         <br>
         <p>これらは、<a href="#remap">キーマップを変える</a>の手順で自由に書き換えることができます。</p>
      </div>

      <h2 id="charge">充電する</h2>
      <img src="img/charge.webp"/>
      <p>USB Type-Cケーブル（別売り）を用意し、電源スイッチを入れた状態でパソコンと有線接続します。<br>
      うまく充電できていれば、口の横が緑色に光ります。<br><br>
      USB接続と電源スイッチの入切によって、おさかなは以下のように動作します。</p>
      <table>
         <tr>
            <td class="noborder"></td>
            <td>USB接続あり</td>
            <td>USB接続なし</td>
         </tr>
         <tr>
            <td>電源<br>オン</td>
            <td>バッテリーを充電しながら動作します。親機ならUSBに入力しますが、USB↔︎BTキーでBlueTooth入力にも切り替えられます。</td>
            <td>バッテリー電源で動作し、Bluetoothで入力します。通常はこの状態で使用してください。</td>
         </tr>
         <tr>
            <td>電源<br>オフ</td>
            <td>USB電源で動作し、USBに入力します。ただし、子機はどんな場合でもBluetoothで親機に入力を伝えようとします。</td>
            <td>動作しません。長時間使用しないときはこの状態にしてください。</td>
         </tr>
      </table>

      <div class="info" id="centered">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>親機と子機</h3>
         <img src="img/send.webp"/>
         <p>おさかなキーボードには親機と子機があります。<br>
            子機は親機に入力を伝え、親機がそれを合わせた入力をパソコンに伝えます。<br>
            このため、親機のみ電源を入れて使うことはできますが、逆はできません。<br>
            左手デヴァイスとしての使用を考え、出荷時は左手を親機に設定しています。<br><br>
            また、同様の理由から、子機は親機の４倍ほど充電が長持ちします。<br>
            一部のOSで確認できる電池残量は親機のもので、子機の充電残量を確認する方法はありませんが、親機のついでに充電してあげてください。
         </p>
      </div>

      <h2 id="remap">キーマップを変える</h2>

      <h3>方法１：ZMK Studio</h3>
      <p>ZMK Firmwareの公式リマップツールであるZMK Studioを使う方法です。開発途上のため<a href="https://zmk.dev/docs/features/studio#capabilities" target="_blank">一部の機能が制限されています</a>が、ブラウザー上でリアルタイムにキーマップを更新できて簡便です。</p>

      <img src="img/studio_connect.webp"/>
      <p>最新版のGoogle ChromeまたはMicrosoft Edgeで<a href="https://zmk.studio/" target="_blank">ZMK Studio</a>にアクセスし、パソコンに親機を有線接続した状態で「USB」をクリックして「Fish Keyboard」に接続します。</p>
      <img src="img/studio_unlock.webp"/>
      <p>「Unlock to Continue」というダイヤログが表示されたら、<a href="https://zmk.dev/docs/keymaps/behaviors/studio-unlock" target="_blank">Studio Unlock</a>が割り当てられたキーを押して（既定は左手下段４キーの同時押し）、編集画面に入ります。</p>
      <img src="img/studio_save.webp"/>
      <p>配列図からキーを選択して割り当てを編集したら、右上の「save」をクリックしておさかなに読み込ませます。実際にキーマップが更新されていることを<a href="../tester/index.html" target="_blank">テスター</a>などで確かめてください。</p>

      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>アプリ版ZMK Studio</h3>
         <p>無線接続中もキーマップを更新できる<a href="https://zmk.studio/download" target="_blank">ネイティヴアプリ版ZMK Studio</a>もあります。</p>
      </div>

      <h3>方法２：キーマップエディター</h3>
      <p>おさかなキーボード公式のキーマップエディターを使う方法です。ほぼ全ての機能が視覚的に設定できますが、ビルドに数分、焼き込みにもひと手間かかります。</p>
      <div class="warn">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">warning</span>Studio対応状況</h3>
         <p>2025年3月現在、キーマップエディターのビルド機能を使って生成されるファームウェアはZMK Studioに対応していません。この断絶は今後、キーマップエディターのビルド機能の更新や、ZMK Studioのキーマップファイル読み込み機能の実装によって解消される見込みです。</p>
      </div>

      <img src="img/remap.webp"/>
      <p><a href="../editor/index.html" target="_blank">キーマップエディター</a>でキーマップを作成し、右下のボタンからファームウェアを生成・ダウンロードします。</p>
      
      <img src="img/boot.webp"/>
      <p>おさかなの両機の電源を切り、親機だけをパソコンとUSB接続します。<br>
         その状態で、上顎の陰にある白いリセットボタンを素早く２回押す、もしくはBoot Resetが割り当てられたキーを押します（既定は上顎＋下顎＋しっぽの同時押し）。
      </p>

      <img src="img/flash.webp"/>
      <p>パソコン側にXIAO-SENSEという名前の外部記憶ディスクが出現したら、親機側のファームウェア（左手ならleft.uf2）をその中にコピーします。<br>
         完了してディスクが消えたら両機の電源を入れ、新しいキーマップで動作することを<a href="../tester/index.html" target="_blank">テスター</a>などで確認してください。
      </p>

      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>無視できるエラー</h3>
         <p>ファームウェアを更新するとき、ファイルの転送やディスクの取り出しに関するエラーが出ることがありますが、通常は無視して大丈夫です。<br>
            （参考：<a href="https://zmk.dev/docs/troubleshooting" target="_blank">Troubleshooting｜ZMK Docs</a>）</p>
      </div>

      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>親機を変える場合</h3>
         <p>ファームウェアの設定で親機の左右を変えた場合は、両方のおさかなの完全なリセットが必要です。一度<a href="settings_reset.uf2" download="settings_reset.uf2">リセットファームウェア</a>を読み込ませたあと正しいファームウェアを読み込ませる、という操作を両機に行なってください。<br>
            （参考：<a href="https://zmk.dev/docs/troubleshooting#split-keyboard-halves-unable-to-pair" target="_blank">Split Keyboard Halves Unable to Pair｜ZMK Docs</a>）</p>
      </div>

      <h3>方法３：Githubリポジトリ</h3>
      <p>ZMK Firmwareの伝統的なリマップ手順です。すべてを文字で記述しなければなりませんが、もっとも確実で、あらゆる自由なカスタマイズが可能です。</p>
      <img src="img/fork.webp"/>
      <p><a href="https://github.com/">Github</a>のアカウントを用意し、<a href="https://github.com/TakumaOnishi/zmk-config-fish" target="_blank">おさかなキーボードの設定リポジトリ</a>をフォークします。</p>
      <img src="img/upload.webp"/>
      <p>作成したリポジトリのconfig/boards/shields/fishを開き、fish.keymap（必要ならfish.confやKconfig.defconfigも）を編集してcommitします。<br>
         名前を変えて複数の.keymapファイルを置いておくこともできますが、有効なのはfish.keymapという名前の１つだけです。<br>
      </p>
      <img src="img/action.webp"/>
      <p>リポジトリの内容を更新すると、Githubが自動的にファームウェアの生成を始めます。<br>
         数分待つとactionsタブからfirmware.zipがダウンロードできるようになるので、これを解凍して前項と同様の手順でおさかなに読み込ませます。</p>

      <h2 id="trouble">こんなときは</h2>
      <h3>パソコンにBluetooth接続できない</h3>
      <p class="dot">充電切れの可能性があるなら、充電してみてください。</p>
      <p class="dot">他のホストに接続中の可能性があるなら、BT Sel 1~5（空いているプロファイル番号）を押すか、BT ClearまたはBT Clear Allで現在のペアリングを解放し、おさかなをペアリングモードに入れてください。</p>
   
      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>ペアリングの解除</h3>
         <p>Bluetoothのペアリングを解除するには、キーボード側からもパソコン側からもプロファイル情報を削除する必要があります。<br>
            まず、解除したいプロファイルに接続した状態でBT Clear（すべて削除したい場合はBT Clear All）を押して、Bluetooth接続が切れたのを確認します。<br>
            その後、パソコンのBluetooth設定からもおさかなの登録を削除します。</p>
      </div>

      <h3>キーマップと違う記号が入力される</h3>
      <p class="dot">「:」が「+」になったり「_」が「=」になったりするなら、パソコン側で外部キーボードの入力方式をJISからANSI（US配列）に変更してください。<br>
      <p class="dot">JIS方式から変えたくない場合は、JIS方式用に翻訳したキーマップを設定してください。デフォルトキーマップのJIS版は<a href="../editor/index.html" target="_blank">エディター</a>のプリセットから選べます。<br>
         （参考：<a href="https://github.com/eswai/zmk_mable/blob/main/config/boards/shields/mable/keycode_japanese.h" target="_blank">ANSI→JISキーコード対応表</a> by eswaiさん） </p>

      <div class="info">
         <h3><span class="material-symbols-rounded" style="font-size: 1.5rem;">info</span>記号入力のひみつ</h3>
         <p>外部キーボードの通信規格には記号を直接入れるコードが存在しないため、たとえばおさかなで「!」を設定したキーを押しても、それは「左Shift + 1」を一瞬で押したことにしているに過ぎません。<br>
            しかし、一部のキーの有無やシフト変化は入力方式（ANSI/ISO/JIS）によって異なるため、このような不具合が起こります。</p>
      </div>

      <h3>接続が悪くなるときがある</h3>
      <p class="dot">キーによらず一時的に入力ができなくなったり、繰り返されたり、遅くなったりするなら、Bluetoothの電波が干渉しているかもしれません。周辺の無線機器の電波を切るか、おさかなを有線接続にしてみてください。</p>

      <h3 id="settings_reset">子機が入力できなくなった</h3>
      <p class="dot">更新するファームウェアの左右を間違えた、または親機の左右を変えた直後なら、一度<a href="settings_reset.uf2" download="settings_reset.uf2">リセットファームウェア</a>を読み込ませたあと正しいファームウェアを読み込ませる、という操作を両機に行なってください。<br>
         （参考：<a href="https://zmk.dev/docs/troubleshooting#split-keyboard-halves-unable-to-pair" target="_blank">Split Keyboard Halves Unable to Pair｜ZMK Docs</a>）</p>

      <h3>充電ができない</h3>
      <p class="dot">電源スイッチを入れた状態でパソコンやACアダプターにUSB接続しても緑の光がつかないなら、<a href="#fix">修理</a>を申請してください。</p>
      
      <h3>キーが反応しない</h3>
      <p class="dot">キーコードの割り当てによらず反応しない・反応が悪いキーがあるなら、<a href="#fix">修理</a>を申請してください。</p>
      
      <h2 id="fix">サポートと修理</h2>
      <p>キーマップや使用法についての情報交換をしたいときや、不具合の対処に助けが必要なときは、<a href="https://discord.gg/VaGEcTQ5tC" target="_blank">公式Discordコミュニティ</a>のサポートフォーラムで検索・投稿してください。<br><br>
         修理を申請したいときは、Discordで大西拓磨（takuma_onishi）にDMするか、support@o24.worksにメールしてください。<br><br>
         このサイトやデフォルトファームウェアに問題を見つけたときは、それぞれのGitHubリポジトリ（<a href="https://github.com/TakumaOnishi/fish/tree/main">サイト</a>／<a href="https://github.com/TakumaOnishi/zmk-config-fish">ファームウェア</a>）にプルリクエストを送るか、Discordで共有してください。</p>

   </div>
   <div id="index">
      <a href="#start">使い始める</a>
      <a href="#charge">充電する</a>
      <a href="#remap">キーマップを変える</a>
      <a href="#trouble">こんなときは</a>
      <a href="#fix">サポートと修理</a>
   </div>
</body>

</html>